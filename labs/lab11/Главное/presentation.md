---
## Front matter
lang: ru-RU
title: Лабораторная работа №11
subtitle: Программирование в командном процессоре ОС UNIX. Ветвления и циклы
author:
  - Аскеров А.Э.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 22 апреля 2023

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
---

# Вступление

## Цель работы

Изучить основы программирования в оболочке ОС UNIX. Научится писать более сложные командные файлы с использованием логических управляющих конструкций и циклов.

# Выполнение лабораторной работы

## Задание 1

1. Используя команды getopts grep, напишем командный файл, который анализирует командную строку с ключами:

- -iinputfile — прочитать данные из указанного файла,

- -ooutputfile — вывести данные в указанный файл,

- -pшаблон — указать шаблон для поиска,

- -C — различать большие и малые буквы,

- -n — выдавать номера строк,

а затем ищет в указанном файле нужные строки, определяемые ключом -p.

## Задание 1

Откроем командный файл, напишем программу, сохраним её, дадим файлу право на выполнение, запустим его и проверим наличие файла, в который выводятся данные.

![Открытие командного файла, разрешение на исполнение, запуск, проверка (сформировался ли файл output.txt, куда выводятся данные)](image/1.png){ width=35% }

![Программа для задания один](image/2.png){ width=30% }

## Задание 2

2. Напишем на языке Си программу, которая вводит число и определяет, является ли оно больше нуля, меньше нуля или равно нулю. Затем программа завершается с помощью функции exit(n), передавая информацию в коде завершения в оболочку. Командный файл должен вызывать эту программу и, проанализировав с помощью команды $?, выдать сообщение о том, какое число было введено.

Напишем программу на языке C++.

![Программа на языке C++](image/3.png){ width=20% }

## Задание 2

Откроем командный файл, напишем программу, сохраним её, дадим файлу право на выполнение и запустим его.

![Открытие командного файла, разрешение на исполнение, запуск](image/4.png){ width=30% }

## Задание 2

![Программа для задания два](image/5.png){ width=30% }

## Задание 3

3. Напишем командный файл, создающий указанное число файлов, пронумерованных последовательно от 1 до N (например, 1.tmp, 2.tmp, 3.tmp, 4.tmp и т.д.). Число файлов, которые необходимо создать, передаётся в аргументы командной строки. Этот же командный файл должен уметь удалять все созданные им файлы (если они существуют).

Откроем командный файл, напишем программу, сохраним её, дадим файлу право на выполнение, запустим его и проверим, были ли созданы и затем удалены пять файлов формата tmp.

![Открытие командного файла, разрешение на исполнение, запуск, проверка](image/6.png){ width=40% }

## Задание 3

![Программа для задания три](image/7.png){ width=35% }

## Задание 4

4. Напишем командный файл, который с помощью команды tar запаковывает в архив все файлы в указанной директории. Модифицируем его так, чтобы запаковывались только те файлы, которые были изменены менее недели тому назад (использовать команду find).

Откроем командный файл, напишем программу, сохраним её, дадим файлу право на выполнение, создадим каталог catalog2, перейдём в него, создадим в нём несколько файлов, запустим командный файл.

![Открытие командного файла, разрешение на исполнение, создание каталога и файлов в нём, запуск командного файла](image/8.png){ width=30% }

## Задание 4

Проверим, были ли запакованы файлы в каталоге.

![Проверка наличия архива](image/9.png){ width=30% }

![Программа для задания четыре](image/10.png){ width=30% }

# Заключение

Изучены основы программирования в оболочке ОС UNIX. Приобретён навык написания более сложных командных файлов с использованием логических управляющих конструкций и циклов.
